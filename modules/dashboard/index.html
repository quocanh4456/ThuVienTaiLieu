<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - EduPlatform</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
</head>
<script>
 window.difyChatbotConfig = {
  token: '5kyb3HqpAOqpvEtf',
  inputs: {
    // You can define the inputs from the Start node here
    // key is the variable name
    // e.g.
    // name: "NAME"
  },
  systemVariables: {
    // user_id: 'YOU CAN DEFINE USER ID HERE',
    // conversation_id: 'YOU CAN DEFINE CONVERSATION ID HERE, IT MUST BE A VALID UUID',
  },
  userVariables: {
    // avatar_url: 'YOU CAN DEFINE USER AVATAR URL HERE',
    // name: 'YOU CAN DEFINE USER NAME HERE',
  },
 }
</script>
<script
 src="https://udify.app/embed.min.js"
 id="5kyb3HqpAOqpvEtf"
 defer>
</script>
<style>
  #dify-chatbot-bubble-button {
    background-color: #1C64F2 !important;
  }
  #dify-chatbot-bubble-window {
    width: 24rem !important;
    height: 40rem !important;
  }
</style>
<body>

    <nav class="sidebar">
        <div class="logo">EduPlatform</div>
        <ul class="nav-links">
            <li><a href="index.html" class="active"><span class="nav-icon">ğŸ“Š</span> Tá»•ng quan</a></li>
            <li><a href="../materials/index.html"><span class="nav-icon">ğŸ“š</span> ThÆ° viá»‡n</a></li>
            <li><a href="../quiz/index.html"><span class="nav-icon">ğŸ“</span> BÃ i há»c & Quiz</a></li>
            <li><a href="../admin/index.html"><span class="nav-icon">âš™ï¸</span> Admin</a></li>
        </ul>
    </nav>

    <main class="main-content">
        <header class="header">
            <h1>Dashboard Há»c Táº­p</h1>
            <div class="avatar">A</div>
        </header>

        <div style="grid-column: 1 / 2;">
            <section>
                <h2 class="section-title">Thá»‘ng kÃª (Superset Integration)</h2>
                <div class="card">
                    <div class="superset-container">
                        <p>Khu vá»±c nhÃºng Iframe Apache Superset</p>
                    </div>
                </div>
            </section>
        </div>

        <aside>
            <h2 class="section-title">ThÃ´ng bÃ¡o (n8n)</h2>
            <div class="card">
                <span class="tag tag-warning">Nháº¯c nhá»Ÿ</span>
                <p>HoÃ n thÃ nh Quiz SQL trÆ°á»›c 23:00</p>
            </div>
            <div class="card">
                <span class="tag tag-danger">Cáº£nh bÃ¡o</span>
                <p>Äiá»ƒm trung bÃ¬nh tháº¥p hÆ¡n má»©c an toÃ n!</p>
            </div>
        </aside>
    </main>

</body>
<ul class="nav-links">
    <li><a href="#" onclick="logout()" style="color: #ef4444;"><span class="nav-icon">ğŸšª</span> ÄÄƒng xuáº¥t</a></li>
</ul>
<script>
    // 1. KIá»‚M TRA ÄÄ‚NG NHáº¬P (Auth Guard)
    const userStr = localStorage.getItem('user_info');
    
    if (!userStr) {
        // ChÆ°a Ä‘Äƒng nháº­p -> ÄÃ¡ vá» trang Login ngay
        alert("Vui lÃ²ng Ä‘Äƒng nháº­p trÆ°á»›c!");
        window.location.href = '../auth/login.html';
    }

    // 2. HIá»‚N THá»Š TÃŠN NGÆ¯á»œI DÃ™NG
    const user = JSON.parse(userStr);
    const avatarElement = document.querySelector('.avatar'); // TÃ¬m cÃ¡i vÃ²ng trÃ²n chá»¯ A
    
    if (avatarElement) {
        // Láº¥y chá»¯ cÃ¡i Ä‘áº§u cá»§a tÃªn (VÃ­ dá»¥: "Tuáº¥n" -> "T")
        avatarElement.innerText = user.name.charAt(0).toUpperCase();
        // (TÃ¹y chá»n) ThÃªm title Ä‘á»ƒ di chuá»™t vÃ o tháº¥y tÃªn Ä‘áº§y Ä‘á»§
        avatarElement.title = "Xin chÃ o, " + user.name; 
    }

    // 3. HÃ€M ÄÄ‚NG XUáº¤T
    function logout() {
        if(confirm("Báº¡n cÃ³ cháº¯c muá»‘n Ä‘Äƒng xuáº¥t?")) {
            // XÃ³a thÃ´ng tin trong bá»™ nhá»› trÃ¬nh duyá»‡t
            localStorage.removeItem('user_info');
            // Chuyá»ƒn hÆ°á»›ng vá» trang Ä‘Äƒng nháº­p
            window.location.href = '../auth/login.html';
        }
    }
</script>
</html>